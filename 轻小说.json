[
  {
  "bookSourceComment": "/*柚屿修改:添加搜索by酷安 @吉王义昊\nwrap了一份WebCrypto API，现在搜索不用等待内置浏览器跳转了*/\n/*柚屿修改采用全新发现，添加并发率限制减少因过快访问导致的页面出错*/\n/*自动获取正文替换by:yolo*/\n/*‼️注:禁止上传源仓库‼️*/\n//🔻下方代码勿动🔻\n// 获取源变量\n_getData = () => {\n  try {\n    data = JSON.parse(source.getVariable()); \n    v=data.url.match(/.+readtool.+\\?(.+)/)[1];\n    java.log(\" 当前净化版本 : \" + v);\n    java.head(data.url, {}); \n  } catch (err) {\n    data = {}; \n  }\n  return data;\n};\n\n// 保存源变量 _setData(data)\n_setData = (obj) => {\n  if (typeof obj == \"object\") {\n    source.setVariable(JSON.stringify(obj)); \n  }\n};\n\n_getData();\n\n//获取净化地址\n\t_getUrl = () => {\n  \ttry {\n\t\t\t url = java.getString(\"tag.script@src\").match(/(https?:.+readtool.+)/)[1];\n\t\t\t } catch(err) {\t\n\t\t\t \t\t\t\turl=data.url\n\t\t\t \t}\n  return url;\n};\n\nfunction getAjaxText(url) {\n  var u=_getUrl();\nresult=java.ajax(u);\nr=result.match(/\\(null,\"(.+)\"/)[1];\nv=r.replace(/[a-zA-Z]/g,',');\nlet arr1 = String(v).split(',');\nlet str2 = String.fromCharCode.apply(null, arr1);\nc=str2.replace(\"document.getElementById('acontentz').innerHTML;h=h\",\"String(h)\").replace(\"document.getElementById('acontentz').innerHTML=h;\",\"\");\n  return c;\n}\n\n_url = _getUrl();\nif (data.url !== _url || !data.url) {\n\tjava.log(\" 获取最新url : \" + _url);\n\tjava.toast(\"若正文仍不对，则说明换方法了，请前往github更新书源by:yolo52\")\n  let c = getAjaxText(_url);\n  data.url = _url;\n  data.c = c;\n  _setData(data);\n}\n\n//java.log(c);",
  "bookSourceGroup": "轻文",
  "bookSourceName": "📖 哔哩轻小说",
  "bookSourceType": 0,
  "bookSourceUrl": "https://www.bilinovel.com##yolo",
  "bookUrlPattern": "https://www.bilinovel.com/novel/\\d+.html",
  "concurrentRate": "",
  "coverDecodeJs": "",
  "customOrder": -1,
  "enabled": true,
  "enabledCookieJar": true,
  "enabledExplore": true,
  "exploreUrl": "[{'title':'全部榜单','url':'','style':{layout_flexGrow:1,layout_flexBasisPercent:1}},\n{'title':'点击总榜','url':'/wenku/allvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'点击月榜','url':'/wenku/monthvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'点击周榜','url':'/wenku/weekvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'推荐总榜','url':'/wenku/allvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'推荐月榜','url':'/wenku/monthvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'推荐周榜','url':'/wenku/weekvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结总点','url':'/topfull/allvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结月点','url':'/topfull/monthvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结周点','url':'/topfull/weekvisit/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结总推','url':'/topfull/allvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结月推','url':'/topfull/monthvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'完结周推','url':'/topfull/weekvote/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'收藏榜单','url':'/topfull/goodnum/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'字数榜单','url':'/topfull/words/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'新书榜单','url':'/topfull/postdate/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'更新榜单','url':'/topfull/lastupdate/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'编辑推荐','url':'/topfull/toptime/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'新书抢鲜','url':'/top/postdate/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'全部文库（更新时间）','url':'/wenku/lastupdate_0_0_0_0_0_0_0_{{page}}_0.html','style':{layout_flexGrow:1,layout_flexBasisPercent:1}},\n{'title':'电击文库','url':'/wenku/dengekibunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'富士见文库','url':'/wenku/fujimibunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'角川文库','url':'/wenku/kadokawabunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'MF文库J','url':'/wenku/emuefubunkojei/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'Fami通文库','url':'/wenku/famitsubunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'GA文库','url':'/wenku/gagraphicbunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'HJ文库','url':'/wenku/hobbyjapanbunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'一迅社','url':'/wenku/ichijinsha/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'集英社','url':'/wenku/shueisha/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'小学馆','url':'/wenku/shogakukan/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'讲谈社','url':'/wenku/kodansha/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'少女文库','url':'/wenku/teenagebunko/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'其他文库','url':'/wenku/other/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'华文轻小说','url':'/wenku/lastupdate_0_0_0_0_2_0_0_{{page}}_0.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'Web轻小说','url':'/wenku/weblightnovel/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:0.25}},\n{'title':'轻改漫画','url':'/wenku/comic/{{page}}.html','style':{layout_flexGrow:1,layout_flexBasisPercent:1}},\n{'title':'全部分类','style':{layout_flexGrow:1,layout_flexBasisPercent:1}},\n{\"title\":\"恋爱 \",\"url\":\"/tagarticle/64/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"后宫 \",\"url\":\"/tagarticle/48/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"百合 \",\"url\":\"/tagarticle/27/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"女性视角 \",\"url\":\"/tagarticle/231/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"欢乐向 \",\"url\":\"/tagarticle/222/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"校园 \",\"url\":\"/tagarticle/63/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"龙傲天 \",\"url\":\"/tagarticle/219/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"妹妹 \",\"url\":\"/tagarticle/217/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"穿越 \",\"url\":\"/tagarticle/26/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"异世界 \",\"url\":\"/tagarticle/47/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"奇幻 \",\"url\":\"/tagarticle/15/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"冒险 \",\"url\":\"/tagarticle/61/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"病娇 \",\"url\":\"/tagarticle/198/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"人外 \",\"url\":\"/tagarticle/223/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"NTR \",\"url\":\"/tagarticle/256/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"性转 \",\"url\":\"/tagarticle/31/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"青梅竹马 \",\"url\":\"/tagarticle/225/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"青春 \",\"url\":\"/tagarticle/67/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"战斗 \",\"url\":\"/tagarticle/18/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"魔法 \",\"url\":\"/tagarticle/96/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"转生 \",\"url\":\"/tagarticle/158/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"大小姐 \",\"url\":\"/tagarticle/227/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"悬疑 \",\"url\":\"/tagarticle/68/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"黑暗 \",\"url\":\"/tagarticle/189/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"伪娘 \",\"url\":\"/tagarticle/201/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"战争 \",\"url\":\"/tagarticle/55/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"科幻 \",\"url\":\"/tagarticle/56/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"复仇 \",\"url\":\"/tagarticle/229/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"JK \",\"url\":\"/tagarticle/246/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"职场 \",\"url\":\"/tagarticle/60/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"异能 \",\"url\":\"/tagarticle/131/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"游戏 \",\"url\":\"/tagarticle/248/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"纯爱 \",\"url\":\"/tagarticle/52/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"斗智 \",\"url\":\"/tagarticle/199/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"经营 \",\"url\":\"/tagarticle/226/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"猎奇 \",\"url\":\"/tagarticle/241/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"耽美 \",\"url\":\"/tagarticle/228/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"JC \",\"url\":\"/tagarticle/304/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"女儿 \",\"url\":\"/tagarticle/261/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"治愈 \",\"url\":\"/tagarticle/98/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"机战 \",\"url\":\"/tagarticle/135/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"群像 \",\"url\":\"/tagarticle/245/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"轻文学 \",\"url\":\"/tagarticle/191/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"旅行 \",\"url\":\"/tagarticle/239/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"大逃杀 \",\"url\":\"/tagarticle/249/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"恶役 \",\"url\":\"/tagarticle/328/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"同人 \",\"url\":\"/tagarticle/333/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"推理 \",\"url\":\"/tagarticle/97/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"末日 \",\"url\":\"/tagarticle/221/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"美食 \",\"url\":\"/tagarticle/211/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"惊悚 \",\"url\":\"/tagarticle/124/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"犯罪 \",\"url\":\"/tagarticle/220/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"音乐 \",\"url\":\"/tagarticle/233/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"萝莉 \",\"url\":\"/tagarticle/185/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"日本文学 \",\"url\":\"/tagarticle/205/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"恐怖 \",\"url\":\"/tagarticle/125/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"脑洞 \",\"url\":\"/tagarticle/224/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"温馨 \",\"url\":\"/tagarticle/180/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"格斗 \",\"url\":\"/tagarticle/132/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"竞技 \",\"url\":\"/tagarticle/146/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"热血 \",\"url\":\"/tagarticle/28/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"宅文化 \",\"url\":\"/tagarticle/263/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"灵异 \",\"url\":\"/tagarticle/182/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"神怪 \",\"url\":\"/tagarticle/183/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"间谍 \",\"url\":\"/tagarticle/254/{{page}}.html\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}}]",
  "header": "@js:\nJSON.stringify({\n        \"upgrade-insecure-requests\":\"1\",\n        \"accept\":\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\",\n        \"accept-language\":\"zh-CN,en-US;q=0.9\",\n        \"Referer\": source.getKey().match(/([^\\#]+)\\#/)[1],\n        \"Cookie\":\"night=1\",\n        \"User-Agent\":\"Mozilla/5.0 (Linux; Android 10; Redmi Note 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4240.99 Mobile Safari/537.36\"\n});",
  "lastUpdateTime": 1715709329432,
  "loginUi": "[\n  {\n    \"name\": \"账号\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"密码\",\n    \"type\": \"password\"\n  }\n]",
  "loginUrl": "@js:\nfunction login() {\n  let une = source.getLoginInfoMap().get(\"账号\")\n  let pwd = source.getLoginInfoMap().get(\"密码\")\n  if (une && pwd) {\n    let body = String('username=' + une + '&password=' + pwd + '&usecookie=315360000&action=login')\n    let url = 'https://www.bilinovel.com' + '/login.php'\n    let ck = java.post(url, body, { \"Content-Type\": \"application/x-www-form-urlencoded\" }).cookies()\n    let header = JSON.stringify({\n      \"Cookie\": String(ck).match(/\\{(.*?)\\}/)[1].replace(/,/g, ';')\n    })\n    source.putLoginHeader(header)\n  }\n}",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": "[property=\"og:novel:author\"]@content",
    "coverUrl": "[property=\"og:image\"]@content",
    "downloadUrls": "text.下载@href",
    "intro": "id.bookSummary@tag.content@textNodes\n@js:\nresult=\"  \"+result;",
    "kind": "class.book-cell@tag.p.1@ownText&&class.tag-small red@text\n##.*万字|·.*",
    "lastChapter": "class.gray ell@text##(\\d+-\\d+-\\d+\\s\\d+:\\d+)·(.*)##$2 • $1",
    "name": "[property=\"og:novel:book_name\"]@content",
    "tocUrl": "[property=\"og:novel:read_url\"]@content",
    "wordCount": "class.book-cell@tag.p.1@ownText##连载|完结"
  },
  "ruleContent": {
    "content": "<js>\n  url = baseUrl;\n  if(String(result).match(/1015|php|503/)) {\n  \t\t\tAimTime = Date.now()+1000;\n    while(AimTime > Date.now()){}\n    result = java.ajax(url);\n  \t} else { result; }\n  \n  if(String(result).match(/反馈设备详细信息|不支持/gi)) {\n\t//java.log(cookie.getCookie(url));\n  cookie.replaceCookie(url, java.webView(null, url, \"document.cookie\"));\n  \tAimTime = Date.now()+1000;\n  while(AimTime > Date.now()){};\n  result = java.ajax(url);\n}\n\neval(String(source.bookSourceComment));\n\nvar h=java.getString('id.acontentz@html');\n\nif (baseUrl.match(/_(?:[02468])+\\d*\\.html/)) {\n   var \tcontent = java.getString('#acontentz@p.-1@html');\n\t  \tvar f1 = java.queryTTF('https://www.bilinovel.com/public/font/read.ttf');\n   var f2 = java.queryTTF('https://github.moeyy.xyz/https://github.com/yolo52/Yuedu/raw/main/bili.ttf');\n   var result = java.replaceFont(content, f1, f2, true);\n   h=h.replace(content,result);\n}\n\neval(data.c);\n\nh\n</js>",
    "imageDecode": "",
    "imageStyle": "FULL",
    "nextContentUrl": "##var nextpage=\"([^\"]+)\"##$1###\n@js:\nvar next=/_\\d+\\.html/.test(result) ? result : '';\nnext;",
    "replaceRegex": "##((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?<!--\\s*\\（继续下一页\\）\\s*-->\\s*|((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?\\（本章未完\\）\\s*|请不要采集，服务器承受不起！",
    "title": "id.atitle@text",
    "webJs": ""
  },
  "ruleExplore": {
    "author": "class.book-author@ownText",
    "bookList": "<js>\nif(result.match(/Just a moment/)){\n   var x=baseUrl;\n   cookie.removeCookie(x);\n\t  java.startBrowserAwait(x,\"验证\");\n\t  result = java.ajax(x);\n\t  }\n\tresult\n</js>\nclass.book-li",
    "bookUrl": "a@href",
    "coverUrl": "img@data-src",
    "intro": "class.book-desc@text",
    "kind": "class.tag-small-group origin-right@tag.em.0@text&&\nclass.tag-small-group origin-right@tag.em.1@text",
    "name": "class.book-title@text",
    "wordCount": "class.tag-small blue@text"
  },
  "ruleSearch": {
    "author": "class.book-author@textNodes",
    "bookList": "@js:\n//java.log(cookie.getCookie(baseUrl))\nif (result.includes(\"no-js\")) {\n  jsContent = java.cacheFile(java.getString(\"tag.script@src\").match(/http.+somework.+\\?v.+/gi)[0])\n  //java.log(result)\n  window = {\n    a: result.match(/window.a=\\'.+\\'/gi)[0].replace(/window.a=|\\'/gi, ''),\n    b: result.match(/window.b=\\'.+\\'/gi)[0].replace(/window.b=|\\'/gi, ''),\n    c: result.match(/window.c=\\'.+\\'/gi)[0].replace(/window.c=|\\'/gi, ''),\n    crypto: {\n      subtle: {\n        importKey(format, keyData, algorithm, extractable, keyUsages) {\n          return {\n            then(func) { func(keyData) }\n          }\n        },\n        decrypt(algorithm, key, data) {\n          cipher = java.createSymmetricCrypto(\"AES/CTR/NoPadding\", key, algorithm.counter)\n          return {\n            then: (func) => { func(cipher.decryptStr(data)) }\n          }\n        }\n      }\n    }\n  }\n  setTimeout = () => { }\n  function TextDecoder() { }\n  TextDecoder.prototype.decode = bytes => bytes\n  document = { cookie: \"\" }\n  funcName=String(jsContent).match(/^function.+\\(/gi)[0].replace(/function| |\\(/gi,'')\n  //\tjava.log(funcName)\n  eval(funcName + ' = str => java.base64DecodeToByteArray(str)')\n  eval(String(jsContent)\n    .replace(/^function.+\\(/gi, 'function ('))\n  //java.log(document.cookie)\n  cookie.replaceCookie(baseUrl, document.cookie)\n  do {\n    t = new Date().getTime()\n    while (new Date().getTime() - t < 5000) { }\n    java.setContent(result = java.ajax(baseUrl + \",\"\n      + JSON.stringify({\n        headers: {\n          Cookie: cookie.getCookie(baseUrl)\n        }\n      })))\n    //java.log(result)\n  } while (result.includes(\"no-js\"))\n}\njava.getElement(\"class.book-ol book-ol-normal@tag.li\")",
    "bookUrl": "tag.a.0@href",
    "checkKeyWord": "朋友",
    "coverUrl": "img@data-src",
    "intro": "class.book-desc@text",
    "kind": "class.tag-small-group origin-right@tag.em@text",
    "name": "class.book-title-x@class.book-title@text"
  },
  "ruleToc": {
    "chapterList": "<js>\nbase=source.getKey().match(/([^\\#]+)\\#/)[1];\nols=java.getElements('#catelogX li:not(.volume-cover)');\nlis=java.getElements('#catelogX li:not(.volume-cover) a');\nfor(i=0,j=0,list=[];i<ols.length;i++){\n\tif(/a.*href/.test(ols[i])){\n\t\tl = parseInt(j)+1;\n\t\tif(/javascript/.test(lis[j].attr('href'))){\n\t\t\tif(l < lis.length){\n\t\t\t\tpre = base+lis[l].attr('href');\n \t\t\t\turl = base + java.ajax(pre)\n\t\t\t\t.match(/prevpage=\"([^\"]+)\"/)[1];\n\t\t\t\tAimTime = Date.now()+1000;\n    while(AimTime > Date.now()){}\n\t\t\t} else {\n\t\t\t\tnex=base+lis[j-1].attr('href');\n\t\t\t\tdo{\n\t\t\t\t\tnext = \"error code: 1015\"\n            while(next == \"error code: 1015\"){\n                 next = String(java.ajax(nex));\n                if(next != \"error code: 1015\"){break;}\n                AimTime = Date.now()+1000;\n                while(AimTime > Date.now()){}\n            }\n\t\t\t\t\tnex=base+next.match(/nextpage=\"([^\"]+)\"/)[1];\n\t\t\t\t\t/_\\d+\\.html/.test(nex)?flag=true:flag=false;\n\t\t\t\t}while(flag)\n\t\t\t\turl=nex;\n\t\t\t}\n\t\t} else{\n\t\t\turl = base + lis[j].attr('href');\n\t\t}\n\t\turl=url+'';\n  //java.log(lis[j].text()+\"::\"+url)\n\t\tlist.push({\"text\":lis[j].text(),\"href\":url})\n\t\tj+=1;\n\t} else {\n\t\t//java.log(ols[i].text())\n\t\tlist.push({\"text\":ols[i].text(),\"vo\":1});\n\t}\t\n}\nlist\n</js>",
    "chapterName": "text",
    "chapterUrl": "href",
    "isVolume": "vo",
    "preUpdateJs": "",
    "updateTime": ""
  },
  "searchUrl": "<js>\npage==1?\n'/search.html?searchkey={{key}}'\n:\n\n'/search/{{key}}_{{page}}.html'\n</js>",
  "weight": 0
},
  {
  "bookSourceComment": "◎开始使用时(搜索或调试)会自动游客登陆,若有账号请再输入账号登陆\n◎注意重复登录现在会触发验证码检查, 有封号的风险\n◎若要切换账号,请在[登陆界面]菜单中清除账号和密码进行[游客登录],再输入账号和密码登陆\n◎重复{点击√}登陆会在一段时间内无法账号登陆(需要等几个小时);如果需要请切换网络[wifi/数据]重新尝试登陆,登陆成功后请勿频繁切换账号\n◎若报错请删除登陆按钮里面的登录头(登陆界面右上角的选项里),并且清除Cookie后重新再次进行登录\n◎因为操作过多，若点击登录√无反应请等待一会\n◎特性: 登陆|游客登录|签到|书架|发现页|购买（需要升级到最新版本≥3.22.081219）",
  "bookSourceGroup": "",
  "bookSourceName": "刺猬猫[正版]",
  "bookSourceType": 0,
  "bookSourceUrl": "https://app.hbooker.com",
  "bookUrlPattern": "",
  "concurrentRate": "",
  "customOrder": 5,
  "enabled": true,
  "enabledCookieJar": true,
  "enabledExplore": true,
  "exploreUrl": "[\n{\"title\":\"个人中心\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"每日签到\",\"url\":\"/reader/get_task_bonus_with_sign_recommend?app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&task_type=1\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"每日任务\",\"url\":\"/task/get_all_task_list?app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&task_type=1\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"个人书架\",\"url\":\"/bookshelf/get_shelf_book_list_new?order=last_read_time&app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&count=100&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&page=0&shelf_id={{source.getLoginHeaderMap()['shelf_id']}}\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"全部分类\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=0&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"玄幻奇幻\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=8&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"都市青春\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=27&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"灵异未知\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=1&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"历史军事\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=30&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"科幻无限\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=6&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"游戏竞技\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=3&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"仙侠武侠\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=5&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"免费同人\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=24&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"女频小说\",\"url\":\"/bookcity/get_filter_search_book_list\n?app_version={{source.getLoginHeaderMap()['app_version']}}&filter_word=&count=10&tags=%5B%7B%22filter%22%3A%221%22%2C%22tag%22%3A%22%22%7D%5D&use_daguan=0&device_token={{source.getLoginHeaderMap()['device_token']}}&is_paid=&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&category_index=11&filter_uptime=&key=&account={{source.getLoginHeaderMap()['account']}}&up_status=&order=week_click\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 0.29}},\n{\"title\": \"小说榜单\",\"url\": \"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"新书月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp_new\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"新书总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp_new\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"点击榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=no_vip_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=no_vip_click\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月票榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=yp\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"收藏榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"周榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=favor\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"畅销榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"周榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=fans_value\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"推荐榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"周榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=recommend\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"刀片榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=blade\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=blade\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"更新榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"周榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=word_count\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"吐槽榜\",\"url\":\"\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 1}},\n{\"title\":\"周榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=week&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"月榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=month&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0.25,\"layout_flexBasisPercent\": -1}},\n{\"title\":\"总榜\",\"url\":\"/bookcity/get_rank_book_list?time_type=total&app_version={{source.getLoginHeaderMap()['app_version']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&count=10&login_token={{source.getLoginHeaderMap()['login_token']}}&page={{page-1}}&account={{source.getLoginHeaderMap()['account']}}&order=tsukkomi\",\"style\": {\"layout_flexGrow\": 0,\"layout_flexBasisPercent\": 0.29}}\n]",
  "header": "{\n  \"user-agent\":\"Android  com.kuangxiangciweimao.novel 2.9.319\"\n}",
  "lastUpdateTime": 1713390320565,
  "loginCheckJs": "",
  "loginUi": "[\n  {\n    \"name\": \"手机号码/邮箱\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"密码\",\n    \"type\": \"password\"\n  }\n]",
  "loginUrl": "<js>\n// 工具类\nvar key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nvar iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nvar aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nvar RandomUtil = Packages.cn.hutool.core.util.RandomUtil\n// 参数\nlet userInfo = source.getLoginInfoMap()\nlet username = userInfo['手机号码/邮箱'].trim()\nlet password = userInfo['密码'].trim()\nlet app_version = \"2.9.319\"\nlet device_token = `ciweimao_`\nlet login_token = RandomUtil.randomString(32)\nlet account = `%E4%B9%A6%E5%AE%A2${RandomUtil.randomNumbers(12)}`\nlet uuid = `android${java.randomUUID()}`\nvar params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\n// 账号登录\nfunction login(username, password){\n  var loginUrl = `https://app.hbooker.com/signup/login?${params}&login_name=${username}&passwd=${password}`\n  var autoRegUrl = `https://app.hbooker.com/signup/auto_reg_v2?oauth_union_id=&app_version=${app_version}&gender=1&oauth_open_id=&device_token=${device_token}&channel=vivo&oauth_type=&uuid=${uuid}`\n  // 是否游客\n  let isLogin = !source.getLoginHeader()\n  let isAuto = username == '' || password == ''\n  if(isAuto && !isLogin){ \n     throw new Error(\"请勿重复登录,如若需要请清除登录头和Cookie\")\n  }\n  var url = isAuto ? autoRegUrl : loginUrl\n  // 获取登录信息\n  let res = JSON.parse(aes.decryptStr(java.ajax(url)))\n  if(res.tip) {\n    throw new Error(isAuto ? '自动登陆失败,请输入账号或切换网络重新登陆' : '账号登陆失败,请尝试切换网络或者等待几小时后重新登陆')\n  }\n  let login_token = res.data.login_token\n  let user_code = res.data.user_code\n  let reader_name = res.data.reader_info.reader_name\n  let account = res.data.reader_info.account\n  let rest_hlb = res.data.prop_info.rest_hlb\n  java.toast(isAuto ? '自动登陆成功,若有账号请输入账号进行登陆' : `${reader_name}【剩余欢乐币:${rest_hlb}】,登录成功!`)\n  // 获取书架\n  let bookList = java.ajax(`https://app.hbooker.com/bookshelf/get_shelf_list?app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`)\n  let shelf_list = JSON.parse(aes.decryptStr(bookList)).data.shelf_list[0]\n  let shelf_id = shelf_list.shelf_id\n  let reader_id = shelf_list.reader_id\n  // 登录完成\n  let header = {\n    \"app_version\": String(app_version),\n    \"device_token\": String(device_token),\n    \"login_token\": String(login_token),\n    \"account\": encodeURIComponent(account),\n    \"user_code\": String(user_code),\n    \"shelf_id\": String(shelf_id),\n    \"reader_name\": encodeURIComponent(reader_name),\n    \"reader_id\": String(reader_id),\n    \"rest_hlb\": String(rest_hlb)\n  }\n  return JSON.stringify(header)\n}\n// 写入登录头\nheader = login(username,password)\nsource.putLoginHeader(header)\n</js>",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": "$.author_name",
    "coverUrl": "$.cover",
    "init": "<js>\nif(!/book_id=.*/.test(baseUrl)) throw new Error(\"缺少参数\")\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nresult = aes.decryptStr(result)\nlet tip = JSON.parse(result).tip\nif(tip) {\n   java.toast(tip)\n   throw new Error(tip)\n}\n</js>\n$.data.book_info",
    "intro": "$.description",
    "kind": "$.tag",
    "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nif(!/[第.*章|\\d+\\.]/.test(title)){\n  title = `第${java.getString(\"last_chapter_info.chapter_index\")}章 ${title}`\n}\n`${title} • ${time}`\n</js>",
    "name": "$.book_name",
    "tocUrl": "/chapter/get_updated_chapter_by_division_new?division_id=0&account={{source.getLoginHeaderMap()['account']}}&device_token={{source.getLoginHeaderMap()['device_token']}}&app_version={{source.getLoginHeaderMap()['app_version']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&book_id={{$.book_id}}",
    "wordCount": "$.total_word_count"
  },
  "ruleContent": {
    "content": "<js>\n// 解密\nfunction decrypt(str1, str2){\n  let key = java.base64DecodeToByteArray(java.digestBase64Str(str2,\"sha256\"))\n  let iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\n  let aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n  return aes.decryptStr(str1)\n}\nlet headerMap = source.getLoginHeaderMap()\n// 获取密钥\nlet app_version = headerMap['app_version']\nlet device_token = headerMap['device_token']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet rest_hlb = headerMap['rest_hlb']\nlet key = \"zG2nSeEfSHfvTCHy5LCcqtBbQehKNLXn\"\nlet cid = baseUrl.match(/chapter_id=(\\d+)/)[1]\nlet result = JSON.parse(decrypt(result,key))\nlet tip = result.tip\nif(tip){\n java.toast(tip)\n throw new Error(tip)\t\n}\nlet cmd = result.data.command\n// 正文内容\nlet body = java.ajax(`https://app.hbooker.com/chapter/get_cpt_ifm?chapter_command=${cmd}&app_version=${app_version}&chapter_id=${cid}&login_token=${login_token}&account=${account}&device_token=${device_token}`)\nlet chInfo = JSON.parse(decrypt(body,key)).data.chapter_info\nlet unit_hlb = java.put('unit_hlb', chInfo.unit_hlb)\nlet content = decrypt(chInfo.txt_content,cmd)\nlet isPay = chInfo.is_paid && chInfo.auth_access == 0\nlet payText = `\\n本章是VIP章节，购买后才能阅读\\n本章需要${unit_hlb}币, 您有${rest_hlb}币,请点击右上角的购买按钮购买本章(请勿乱点)，购买后自动加入到个人书架！`\nisPay ? content + payText : content \n</js>",
    "payAction": "// 解密\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n// 参数\nlet headerMap = source.getLoginHeaderMap()\nlet app_version = headerMap['app_version']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet device_token = headerMap['device_token']\nlet shelf_id = headerMap['shelf_id']\nlet chapter_id = chapter.url.match(/chapter_id=(\\d+)/)[1]\nlet params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\n// 开始购买\nlet payUrl = `https://sk.hbooker.com/chapter/buy?${params}&shelf_id=${shelf_id}&chapter_id=${chapter_id}`\nlet payRes = JSON.parse(aes.decryptStr(java.ajax(payUrl)))\nif(payRes.tip){\n java.toast(payRes.tip)\n throw new Error(payRes.tip)\t\n}\n// 更新书币\nlet propUrl = `https://sk.hbooker.com/reader/get_prop_info?${params}`\nlet propRes = JSON.parse(aes.decryptStr(java.ajax(propUrl)))\nif(propRes.tip){\n java.toast(propRes.tip)\n throw new Error(propRes.tip)\t\n}\nlet rest_hlb = propRes.data.prop_info.rest_hlb\njava.toast(`购买成功,剩余书币${rest_hlb},请手动刷新正文`)\nsource.putLoginHeader(Object.assign(headerMap,{'rest_hlb': String(rest_hlb)}))",
    "replaceRegex": "##<img[^>]*src=\"([^\"]*(?:\"[^>]+\\})?)\"[^>]*>"
  },
  "ruleExplore": {
    "author": "$.author_name||$.book_info.author_name",
    "bookList": "<js>\nvar headerMap = source.getLoginHeaderMap()\n// 参数\nlet app_version = headerMap['app_version']\nlet account = headerMap['account']\nlet login_token = headerMap['login_token']\nlet device_token = headerMap['device_token']\nlet rest_hlb = headerMap['rest_hlb']\nlet params = `app_version=${app_version}&device_token=${device_token}&login_token=${login_token}&account=${account}`\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\n// 获取数据\nresult = aes.decryptStr(result)\nlet res = JSON.parse(result)\n// 签到\nif(/get_task_bonus_with_sign_recommend.*/.test(baseUrl)){\n  let hlb = res.tip ? 0 : Number(res.data.bonus.hlb)\n  // 获取书币\n  let walletUrl = `https://app.happybooker.cn/reader/get_wallet_info?${params}`\n  let walletRes = JSON.parse(aes.decryptStr(java.ajax(walletUrl)))\n  rest_hlb = walletRes.tip ? rest_hlb : Number(walletRes.data.wallet_info.rest_hlb) + hlb\n  let message = res.tip ? `${res.tip},当前剩余${rest_hlb}欢乐币`:`签到成功,获得${hlb}欢乐币,当前剩余${rest_hlb}欢乐币`\n  source.putLoginHeader(Object.assign(headerMap,{'rest_hlb': String(rest_hlb)}))\n  java.toast(message)\n  result={}\n} else if(res.tip) { \n   java.toast(res.tip)\n   throw new Error(res.tip)\n   result={}\n}\n</js>\n$.data.book_list[*]||$.data.daily_task_list[*]",
    "bookUrl": "/book/get_info_by_id?app_version={{source.getLoginHeaderMap()['app_version']}}&book_id={{$.book_id||$.book_info.book_id}}&use_daguan=1&device_token={{source.getLoginHeaderMap()['device_token']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}",
    "coverUrl": "$.cover||$.book_info.cover ",
    "intro": "$.description||$.bonus",
    "kind": "{{$.tag}}\n{{java.getString('total_count')!='' ? `总次数：${java.getString('total_count')}/完成次数：${java.getString('complete_count')}` : ''}}\n{{java.getString(\"is_finished\") == 1 ? '完成': '未完成'}}",
    "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nlet index = java.getString(\"last_chapter_info.chapter_index\")\nif(!/第.*章/.test(title)){\n  title = `第${index}章 ${title}`\n}\n!/[bookshelf|get_all_task_list].*/.test(baseUrl) ? `${title} • ${time}` : ''\n</js>",
    "name": "$.book_name||$.book_info.book_name||$.name",
    "wordCount": "$.total_word_count||$.book_info.total_word_count"
  },
  "ruleSearch": {
    "author": "$.author_name",
    "bookList": "<js>\n// 解密\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nresult = aes.decryptStr(result)\nlet tip = JSON.parse(result).tip\nif(tip) {\n   java.toast(tip)\n   throw new Error(tip)\n}\n</js>\n$.data.book_list[*]",
    "bookUrl": "/book/get_info_by_id?app_version={{source.getLoginHeaderMap()['app_version']}}&book_id={{$.book_id}}&use_daguan=1&device_token={{source.getLoginHeaderMap()['device_token']}}&login_token={{source.getLoginHeaderMap()['login_token']}}&account={{source.getLoginHeaderMap()['account']}}",
    "coverUrl": "$.cover",
    "intro": "$.description",
    "kind": "$.tag&&$.book_src",
    "lastChapter": "<js>\nlet title = java.getString(\"last_chapter_info.chapter_title\")\nlet time = java.getString(\"last_chapter_info.uptime\")\nif(!/第.*章/.test(title)){\n  title = `第${java.getString(\"last_chapter_info.chapter_index\")}章 ` + title\n}\n`${title} • ${time}`\n</js>",
    "name": "$.book_name",
    "wordCount": "$.total_word_count"
  },
  "ruleToc": {
    "chapterList": "<js>\n// 解密\nlet key = java.base64DecodeToByteArray(\"lXsAUe1NZEw6tAxM9w1Tpq2tU4la2+PwM8evj2C+yB0=\")\nlet iv = java.base64DecodeToByteArray(\"AAAAAAAAAAAAAAAAAAAAAA==\")\nlet aes = Packages.cn.hutool.crypto.symmetric.AES(\"CBC\",\"PKCS5Padding\", key, iv)\nlet app_version = source.getLoginHeaderMap()['app_version']\nlet account = source.getLoginHeaderMap()['account']\nlet login_token = source.getLoginHeaderMap()['login_token']\nlet device_token = source.getLoginHeaderMap()['device_token']\n// 章节列表\nlet res = JSON.parse(aes.decryptStr(result))\nif(res.tip) { \n   java.toast(res.tip)\n   throw new Error(res.tip)\n}\nlet chList = []\nres.data.chapter_list.forEach(volList => {\n chList.push({title: volList.division_name,voltype: true})\n volList.chapter_list.forEach(item=>{\n   chList.push({\n    cid: item.chapter_id,\n    title: item.chapter_title,\n    isVip: item.is_paid&&item.auth_access==0,\n    isPay: item.auth_access,\n    url: `https://app.hbooker.com/chapter/get_chapter_command?app_version=${app_version}&chapter_id=${item.chapter_id}&login_token=${login_token}&account=${account}&device_token=${device_token}`,\n    info: `更新时间 ${item.mtime} 字数 ${item.word_count}`\n   })\n })\n})\nchList\n</js>",
    "chapterName": "title",
    "chapterUrl": "url",
    "isPay": "isPay",
    "isVip": "isVip",
    "isVolume": "voltype",
    "updateTime": "info"
  },
  "searchUrl": "<js>\n(function(key,page){\nif(!source.getLoginHeaderMap()){\n  // 自动登陆\n  source.login()\n}\nlet headerMap = source.getLoginHeaderMap()\nlet app_version = headerMap['app_version']\nlet device_token = headerMap['device_token']\nlet login_token = headerMap['login_token']\nlet account = headerMap['account']\nreturn `/bookcity/get_filter_search_book_list?app_version=${app_version}&count=10&page=${page - 1}&use_daguan=1&device_token=${device_token}&login_token=${login_token}&category_index=0&key=${key}&account=${account}`\n})(key,page)\n</js>",
  "weight": 0
  }
]
